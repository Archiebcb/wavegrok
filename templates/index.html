<!DOCTYPE html>
<html>
<head>
    <title>WaveGrok</title>
    <script>
        async function fetchData() {
            const symbol = document.getElementById('symbol').value;
            const timeframe = document.getElementById('timeframe').value;
            const limit = document.getElementById('limit').value;
            const response = await fetch('/fetch', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ symbol, timeframe, limit })
            });
            const result = await response.json();
            document.getElementById('output').innerText = result.message;
        }

        async function analyzeWaves() {
            const symbol = document.getElementById('symbol').value;
            const primary_tf = document.getElementById('timeframe').value;
            const secondary_tf = document.getElementById('secondary_tf').value;
            const response = await fetch('/analyze', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ symbol, primary_tf, secondary_tf })
            });
            const result = await response.json();
            document.getElementById('output').innerText = result.message;
        }

        function loadChart() {
            const timeframe = document.getElementById('timeframe').value;
            document.getElementById('chart').src = `/chart/${timeframe}`;
        }
    </script>
</head>
<body>
    <h1>WaveGrok Trading Assistant</h1>
    <input id="symbol" placeholder="Enter symbol (e.g., BTC/USD)" />
    <input id="timeframe" placeholder="Timeframe (e.g., 1h)" />
    <input id="limit" placeholder="Limit (e.g., 500)" />
    <button onclick="fetchData()">Fetch Data</button>
    <br><br>
    <input id="secondary_tf" placeholder="Secondary Timeframe (e.g., 4h)" />
    <button onclick="analyzeWaves()">Analyze Waves</button>
    <button onclick="loadChart()">Show Chart</button>
    <br><br>
    <img id="chart" src="" alt="Chart will appear here" style="max-width: 100%;" />
    <pre id="output">Results will show here...</pre>
</body>
</html>